<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Preview Post</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='preview_post.css') }}">
</head>
<body>
  <div class="navbar">
    <button class="back-button" onclick="goBack()">&#8592;</button>
  </div>
  <div class="container">
    <div class="button-group">
      <button class="toggle-button active" id="linkedin-button" data-content="LinkdedIn post content goes here..." onclick="switchPost('linkedin')">LinkedIn</button>
      <button class="toggle-button" id="x-button" data-content="Twitter post goes here..." onclick="switchPost('x')">X</button>
    </div>
    <textarea id="post-body" class="post-textarea" rows="15">
        <!-- {{ linkedinPost }} -->
    </textarea>
    <button class="submit-button" onclick="createPost()">Create Post</button>
  </div>

  <!-- <script src="{{ url_for('static', filename='preview_post.js') }}"></script> -->
  <script>
    let linkedInPost = {{ linkedinPost | tojson | safe }}; // Correctly processed from Flask
    let twitterPost = {{ twitterPost | tojson | safe }};  // Correctly processed from Flask
  
    document.addEventListener("DOMContentLoaded", function () {
      const postBody = document.getElementById("post-body");
      postBody.value = linkedInPost;  // Set LinkedIn post as default content
    });
  
    function switchPost(platform) {
      const linkedinButton = document.getElementById("linkedin-button");
      const xButton = document.getElementById("x-button");
      const postBody = document.getElementById("post-body");
  
      // Switch to the selected platform's post
      if (platform === "linkedin") {
        linkedinButton.classList.add("active");
        xButton.classList.remove("active");
        postBody.value = linkedInPost || "LinkedIn post content goes here...";
      } else {
        linkedinButton.classList.remove("active");
        xButton.classList.add("active");
        postBody.value = twitterPost || "Twitter post content goes here...";
      }
    }
  
    function createPost() {
      const linkedinPost = document.getElementById("linkedin-button").dataset.content || "";
      const twitterPost = document.getElementById("x-button").dataset.content || "";
  
      // Send post content to the backend
      fetch("/normal_post/preview_post", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ linkedinPost, twitterPost })
      })
        .then((response) => response.json())
        .then((data) => {
          console.log("Backend Response:", data);
        })
        .catch((error) => console.error("Error:", error));
    } 
   </script>
</body>
</html>

<!-- Today was a productive day in my full-stack journey! ðŸ”¨ I successfully implemented user authentication in my project, a crucial step towards building a secure and user-friendly application. This involved diving into OAuth 2.0, a widely used industry standard for secure authorization. -->

<!-- Learning to leverage OAuth 2.0 has been an invaluable experience. I now understand how to grant third-party applications access to user data while maintaining strong security measures. This knowledge will be instrumental in building robust and secure applications in the future. -->